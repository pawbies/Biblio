<div class="container mx-auto mb-10 px-5">

  <section>
    <h1 class="text-3xl font-bold mb-6 text-gray-800">Empfohlene BÃ¼cher</h1>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

      <% @books.each do |book| %>
      <div class="bg-white shadow rounded overflow-hidden">

        <div class="h-64 bg-gray-200 flex items-center justify-center">
          <% if book.cover.attached? %>
            <%= image_tag book.cover, class: "w-full h-full object-fill" %>
          <% else %>
            <i class="fas fa-book text-gray-500 text-6xl"></i>
          <% end %>
        </div>

        <div class="p-4">
          <h2 class="text-lg font-semibold text-gray-800 truncate"><%= book.title %></h2>

          <p class="text-gray-600 mt-2">
            Von: 
            <%= book.authors.map { |author| link_to author.display_name, author_path(author) }.join(", ").html_safe %>
          </p>

          <div class="mt-2 flex items-center">
            <% if book.average_rating.present? %>
              <% average = book.average_rating.round %>
              <% 5.times do |i| %>
                <% if i < average %>
                  <i class="fas fa-star text-yellow-400"></i>
                <% else %>
                  <i class="far fa-star text-gray-300"></i>
                <% end %>
              <% end %>
              <span class="ml-2 text-sm text-gray-600"><%= book.average_rating.round(1) %>/5</span>
            <% else %>
              <span class="text-sm text-gray-500">Keine Bewertungen</span>
            <% end %>
          </div>

          <p class="text-gray-500 mt-2 text-sm"><%= truncate(book.description, length: 100) %></p>

          <div class="mt-4">
            <a href="<%= book_path(book) %>" class="text-blue-500 hover:underline text-sm flex items-center">
              <i class="fas fa-book-open mr-2"></i> Mehr
            </a>
          </div>
        </div>
      </div>
      <% end %>
    </div>
  </section>

  <section class="mt-16">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">Beliebte Authoren</h1>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

      <% @authors.each do |author| %>
      <div class="bg-white shadow rounded overflow-hidden text-center p-4">

        <div class="h-24 w-24 bg-gray-200 rounded-full mx-auto flex items-center justify-center mb-4">
          <% if author.pfp.attached? %>
            <%= image_tag author.pfp, class: "rounded-full w-full h-full object-fill" %>
          <% else %>
            <i class="fas fa-user text-gray-500 text-3xl"></i>
          <% end %>
        </div>


        <h3 class="text-lg font-semibold text-gray-800"><%= author.display_name %></h3>
        <p class="text-gray-500 mt-2 text-sm"><%= truncate(author.bio, length: 100) %></p>

        <div class="mt-4">
          <a href="<%= author_path(author) %>" class="text-blue-500 hover:underline text-sm flex items-center justify-center">
            <i class="fas fa-user mr-2"></i> Profil ansehen
          </a>
        </div>
      </div>
      <% end %>
    </div>
  </section>

</div>
